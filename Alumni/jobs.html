<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="awesome_fonts/css/font-awesome.css">
<link rel="stylesheet" type="text/css" href="awesome_fonts/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="Main_style.css">
<title>Available jobs</title>
<style type="text/css">
<!--
.style1 {font-size: 36px}
.style4 {font-size: 24px}

-->
</style>
</head>
<body>





<div id="wrap">


<div id="header">
  <table width="100%" border="0">
    <tr>
      <td width="14%" rowspan="3"><div align="center"><span class="style1"><img src="images/skit_logo.png" width="158" height="113" alt="mono" /></span></div></td>
      <td width="86%"><div align="left"><span class="style6">Swami Keshvanand Institute of Technology,
        Management & Gramothan, Jaipur</span></div></td>
    </tr>
    <tr>
      <td height="38"><div align="left"><span class="style4">Ramnagaria, Jagatpura
        Jaipur-302 017,
        Rajasthan
        India</span></div></td>
    </tr>
    <tr>
      <td height="30"><span class="style4">Alumni Association</span></td>
    </tr>
  </table>
  </div>


  <ul id="nav">
    <li><a href="index.html" title="#"><i class="fa fa-home fa-1g" style="color:#FFFFFF;"></i> Home</a></li>
    <li><a href="course.html" title="List of the Courses"><i class="fa fa-book fa-1g" style="color:#FFFFFF;"></i> Course</a></li>
    <li><a href="placement.html" title="Placement Record"><i class="fa fa-dollar fa-1g" style="color:#FFFFFF;"></i> Placement</a></li>
    <li><a href="gallery.html" title="Gallery"><i class="fa fa-picture-o fa-2g" style="color:#FFFFFF;"></i> Gallery</a></li>
    <li><a href="alumni.html" title="List Of Alumni"><i class="fa fa-users fa-1g" style="color:#FFFFFF;"></i> Alumni</a></li>
    <li class="active"><a href="jobs.html" title="List Of Jobs"><i class="fa fa-tags fa-2g" style="color:#FFFFFF;"></i> Jobs</a></li>

    <li style="float:right"><a href="./index.html" title="conatctUs"><i class="fa fa-street-view fa-2g" style="color:#FFFFFF;"></i> Log Out</a></li>
    <li style="float:right"><a href="./contactus.html" title="conatctUs"><i class="fa fa-street-view fa-2g" style="color:#FFFFFF;"></i> ContactUs</a></li>
    </ul>

<div id="side_r">


 <div class="pannel" style="height:auto;">
			<div class="pannel-header"><i class="fa fa-search fa-1g" style="color:#FFFFFF;"></i> Search</div>
			<div class="pannel-body">
			<input type="text" name="search_text" id="searchInput" placeholder="Search by title....."/>
			<input type="button" onclick="handleSearch()" name="btn_search" id="btn_search" value="Search" style="display:block; width:50%; cursor: pointer; margin:auto; padding : 3px;"/>
      <input type="button" onclick="NewJob()" value="Add New Job" style="display:block; margin: auto; margin-top: 10px; cursor: pointer; width:50%; padding : 3px;"/>
			</div>
			
	</div>






<div class="pannel">
			<div class="pannel-header"><i class="fa fa-calendar fa-1g" style="color:#FFFFFF;"></i> Latest News: <a href="events.html" title="GO TO ALL EVENTS PAGE"><i class="fa fa-arrow-circle-right fa-1g" style="color:#FFFFFF; float:right;"></i> </a></div>
			<div class="pannel-body">
			<ul>
				<marquee direction="up"   onmouseover="this.stop();" onmouseout="this.start();">
				<li><a href="#" title="#">Next week will be a workshop on networking</a></li><hr>
				<li><a href="#" title="#">Next week will be a workshop on Web Technology</a></li><hr>
				<li><a href="#" title="#">Next week will be a workshop on networking</a></li><hr>
				<li><a href="#" title="#">Next week will be a workshop on Web Technology</a></li><hr>
				
				</marquee>
			</ul>
			
			</div>
			
	</div>



    
    <div class="pannel" style="height:auto;">
			<div class="pannel-header">Follow Us </div>
			<div class="pannel-body">
			<A HREF="#" title="Go To Facebook PAge" style="color:#333"><i class="fa fa-facebook-square fa-2x" ></i></a>
            <A HREF="#" title="Go To google-plus page" style="color:#333"><i class="fa fa-google-plus-square fa-2x" ></i></a>
            <A HREF="#" title="Go To twitter page" style="color:#333"><i class="fa fa-twitter-square fa-2x" ></i></a>
            <A HREF="#" title="Go To youtube channel" style="color:#333"><i class="fa fa-youtube fa-2x" ></i></a>
            <A HREF="#" title="Go To rss site" style="color:#333"><i class="fa fa-rss-square fa-2x" ></i></a>
            <A HREF="#" title="Go To linkedin account" style="color:#333"><i class="fa fa-linkedin-square fa-2x" ></i></a>
            
			
			</div>
			
	</div>

</div><!--End of the side bar -->


<div id="main">
<fieldset>
<h2></h2><hr>
<table width="98%" border="1" align="center" id="employeeList" cellpadding="5" cellspacing="0" class="c1 tbl">
  <thead>
  <tr>
    <th><div align="center"><strong>Job Title</strong></div></th>
    <th><div align="center"><strong>Comapny</strong></div></th>
    <th><div align="center"><strong>Location</strong></div></th>
    <th><div align="center"><strong>Job Type</strong></div></th>
    <th><div align="center"><strong>Expire In</strong></div></th>
    <th><div align="center"><strong>Description</strong></div></th>
    <th><div align="center"><strong>Link</strong></div></th>
  </tr>
  </thead>
    <tbody id="reviewsList">
      </tbody>
</table>



</fieldset>
</div>


<div id="footer">
<center>
  	<a href="gallery.html" title="List of photos of events">Gallery</a> | 
    <a href="downloads.html" title="list of Downloads">Downloads</a> | 
    <a href="contactus.html" title="Contanct Us Page">Contact Us</a> | 
    <a href="http://www.skit.ac.in" title="Go To University Website">University Website</a> |
	<a href="https://transformingindia.mygov.in/scheme/pms-scholarship-scheme/" title="Go To Schlorship Portal">Schlorship Portal</a> |
	<a href="https://www.antiragging.in/" title="Go To Anti-Ragging Website">Anti-Ragging Website</a> |
    <br>
    <br>
    
</center>  
</div>

</div>



<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>

  <script>
    const firebaseConfig = {
      // Your Firebase config details here
      apiKey: "AIzaSyCbE3UXkP2J5-T_fSuCsmAWU_bNLiRH8aE",
      authDomain: "alumni-management-system-3800d.firebaseapp.com",
      projectId: "alumni-management-system-3800d",
      storageBucket: "alumni-management-system-3800d.appspot.com",
      messagingSenderId: "496530271243",
      appId: "1:496530271243:web:f69ffeb96dd389511aab0e",
      measurementId: "G-3X4HB12QQP",
      databaseURL: "https://alumni-management-system-3800d-default-rtdb.asia-southeast1.firebasedatabase.app/",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const reviewsList = document.getElementById('reviewsList');


    // Function to handle search
    const handleSearch = () => {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const reviews = document.querySelectorAll('#reviewsList tr');
      
      reviews.forEach(review => {
        const title = review.querySelector('td:nth-child(1)').textContent.toLowerCase();

        if (title.includes(searchTerm)) {
          review.style.display = 'table-row';
        } else {
          review.style.display = 'none';
        }
      });
    };

    const NewJob = ()=>{
      window.location.href= "./jobsPosted.html";
    }

     // Function to periodically check for expired jobs and delete them
     const checkAndDeleteExpiredJobs = () => {
      const reviews = document.querySelectorAll('#reviewsList tr');
      const currentDate = new Date().getTime(); // Get current date in milliseconds

      reviews.forEach(review => {
        const createdAt = review.querySelector('td:nth-child(5)').textContent;
        const days = parseInt(review.dataset.days); // Assuming you store days in a data attribute
        
        // Calculate the expiration date by adding 'days' to the createdAt date
        const expirationDate = new Date(createdAt);
        expirationDate.setDate(expirationDate.getDate() + days);
        
        if (currentDate > expirationDate.getTime()) {
          const id = review.dataset.id; // Assuming you store the job id in a data attribute
          // Delete the job entry from the database
          remove(ref(db, `JobsPosted/${id}`));
          // Remove the corresponding row from the UI
          review.remove();
        }
      });
    };

    function redirectToDomain(url) {
    if (!url.startsWith("file:///")) { // Check if URL is not a local file path
      window.open(url, '_blank');
    }
  }

    // Schedule the checkAndDeleteExpiredJobs function to run periodically (e.g., every 24 hours)
    setInterval(checkAndDeleteExpiredJobs, 24 * 60 * 60 * 1000); // Run every 24 hours

    const fetchReviews = () => {
      db.ref('JobsPosted').on('value', (snapshot) => {
        reviewsList.innerHTML = ''; // Clear the previous reviews

        const reviewsData = snapshot.val();
        if (reviewsData) {
          Object.entries(reviewsData).forEach(([id, review]) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
              <td>${review.title}</td>
              <td>${review.name}</td>
              <td>${review.location}</td>
              <td>${review.type}</td>
              <td>${review.days}</td>
              <td>${review.description}</td>
              <td><a href="#" onclick="redirectToDomain('${review.link}');" target="_blank">Link</a></td>
            `;
            reviewsList.appendChild(tr);
          });
        }
      });
    };

    // Fetch reviews on page load
    document.addEventListener('DOMContentLoaded', fetchReviews);
  </script>




</body>
</html>

